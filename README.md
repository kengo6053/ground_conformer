# Ground Conformer — Blender アドオン

**Ground Conformer** は、選択した小物オブジェクトをワンクリックで地形メッシュに吸着させ、オブジェクトの **底面が必ず地面に接触** するように配置するテクニカルアーティスト向けツールです。内部では `ray_cast()` を用いて真下にレイを飛ばし、ヒット位置とバウンディングボックスの最下端を計算して位置合わせを行います。

![demo-gif](docs/demo.gif)

---

## ✨ 主な機能

| 機能                   | 内容                                                             | 効果                                                                 |
| ---------------------- | ---------------------------------------------------------------- | -------------------------------------------------------------------- |
| **底面接地**           | バウンディングボックスの最下端を求め、ヒット面上にオフセット配置 | 原点が中心でも“浮き”を解消                                           |
| **レイキャスト配置**   | `scene.ray_cast()` で最初に当たった面を取得                      | 凹凸地形や斜面でも正確に置ける :contentReference[oaicite:1]{index=1} |
| **法線合わせ（任意）** | Z 軸をヒット面法線へ回転                                         | 岩や草などを自然な向きで配置                                         |
| **バッチ対応**         | 複数オブジェクトを一括処理                                       | セットドレッシングの時短                                             |
| **UNDO 対応**          | `bl_options={'REGISTER','UNDO'}` を使用                          | いつでも元に戻せて安心 :contentReference[oaicite:2]{index=2}         |

---

## 🛠️ 必要環境

- **Blender 3.6** 以降（3.6 LTS と 4.0 Alpha で動作確認）
- 追加の Python パッケージは不要 — `bpy` 標準 API のみで動作

---

## 📦 インストール手順

1. [Releases](../../releases) から最新の ZIP をダウンロード。
2. Blender の **「編集 → プリファレンス → アドオン → インストール…」** で ZIP を選択。 :contentReference[oaicite:3]{index=3}
3. チェックボックスを有効にすると **「TA」タブ** が 3D ビューのサイドバー (N キー) に追加されます。

> **補足:** アドオンが有効化できない場合は、Blender コンソールにエラーメッセージが出ていないか確認してください。 :contentReference[oaicite:4]{index=4}

---

## 🚀 使い方

1. 地形メッシュと同じシーンに小物を置き、**配置したい小物を選択**。
2. **サイドバー → TA タブ → [ Ground Conform ]** をクリック。
3. **F9（オペレーター設定）** でオプションを確認・変更可能。

> よく使う場合は **F3 → “Ground Conform” → 右クリック → 「ショートカットに割り当て」** でホットキー登録すると便利です。 :contentReference[oaicite:5]{index=5}

---

## ⚙️ オペレーターオプション

| プロパティ          | 型    | 既定値   | 説明                               |
| ------------------- | ----- | -------- | ---------------------------------- |
| **Ray Length**      | Float | `1000.0` | 原点から下方向に探索する最大距離   |
| **Align to Normal** | Bool  | `False`  | ON で Z 軸をヒット面法線へ合わせる |

---

## 📂 ディレクトリ構成例
